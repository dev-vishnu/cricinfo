var cov_jwqajhp1a=function(){var path="/home/dev/project-players-01/src/common/passport_strategy.js",hash="96b036dc860b81f8667a60c38b2baaba5e9cb809",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/home/dev/project-players-01/src/common/passport_strategy.js",statementMap:{"0":{start:{line:1,column:22},end:{line:1,column:56}},"1":{start:{line:2,column:14},end:{line:2,column:30}},"2":{start:{line:3,column:15},end:{line:3,column:45}},"3":{start:{line:7,column:2},end:{line:19,column:5}},"4":{start:{line:9,column:6},end:{line:17,column:7}},"5":{start:{line:10,column:23},end:{line:10,column:94}},"6":{start:{line:11,column:8},end:{line:13,column:9}},"7":{start:{line:12,column:10},end:{line:12,column:35}},"8":{start:{line:14,column:8},end:{line:14,column:39}},"9":{start:{line:16,column:8},end:{line:16,column:32}},"10":{start:{line:21,column:2},end:{line:27,column:5}},"11":{start:{line:22,column:4},end:{line:24,column:5}},"12":{start:{line:23,column:6},end:{line:23,column:24}},"13":{start:{line:25,column:4},end:{line:25,column:46}},"14":{start:{line:26,column:4},end:{line:26,column:30}},"15":{start:{line:29,column:2},end:{line:40,column:5}},"16":{start:{line:30,column:4},end:{line:39,column:5}},"17":{start:{line:31,column:6},end:{line:31,column:24}},"18":{start:{line:33,column:6},end:{line:38,column:7}},"19":{start:{line:34,column:8},end:{line:34,column:29}},"20":{start:{line:36,column:8},end:{line:36,column:25}},"21":{start:{line:37,column:8},end:{line:37,column:28}},"22":{start:{line:43,column:0},end:{line:43,column:32}}},fnMap:{"0":{name:"passportConfig",decl:{start:{line:6,column:9},end:{line:6,column:23}},loc:{start:{line:6,column:34},end:{line:41,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:8,column:5},end:{line:8,column:6}},loc:{start:{line:8,column:41},end:{line:18,column:5}},line:8},"2":{name:"(anonymous_2)",decl:{start:{line:21,column:25},end:{line:21,column:26}},loc:{start:{line:21,column:41},end:{line:27,column:3}},line:21},"3":{name:"(anonymous_3)",decl:{start:{line:29,column:27},end:{line:29,column:28}},loc:{start:{line:29,column:53},end:{line:40,column:3}},line:29}},branchMap:{"0":{loc:{start:{line:11,column:8},end:{line:13,column:9}},type:"if",locations:[{start:{line:11,column:8},end:{line:13,column:9}},{start:{line:11,column:8},end:{line:13,column:9}}],line:11},"1":{loc:{start:{line:22,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:24,column:5}},{start:{line:22,column:4},end:{line:24,column:5}}],line:22},"2":{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:30,column:4},end:{line:39,column:5}}],line:30}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"d34fc3e6b8297bcde183f5492bcb8fcb36775295"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();const LocalStrategy=(cov_jwqajhp1a.s[0]++,require('passport-local').Strategy);const axios=(cov_jwqajhp1a.s[1]++,require('axios'));const logger=(cov_jwqajhp1a.s[2]++,require('./winston_config.js'));function passportConfig(passport){cov_jwqajhp1a.f[0]++;cov_jwqajhp1a.s[3]++;passport.use(new LocalStrategy(async(username,password,done)=>{cov_jwqajhp1a.f[1]++;cov_jwqajhp1a.s[4]++;try{const result=(cov_jwqajhp1a.s[5]++,await axios.post('http://localhost:3000/login',{username,password}));cov_jwqajhp1a.s[6]++;if(!result.data){cov_jwqajhp1a.b[0][0]++;cov_jwqajhp1a.s[7]++;return done(null,false);}else{cov_jwqajhp1a.b[0][1]++;}cov_jwqajhp1a.s[8]++;return done(null,result.data);}catch(err){cov_jwqajhp1a.s[9]++;return done(err,false);}}));cov_jwqajhp1a.s[10]++;passport.serializeUser((user,done)=>{cov_jwqajhp1a.f[2]++;cov_jwqajhp1a.s[11]++;if(!user){cov_jwqajhp1a.b[1][0]++;cov_jwqajhp1a.s[12]++;done(null,false);}else{cov_jwqajhp1a.b[1][1]++;}cov_jwqajhp1a.s[13]++;logger.info(`${user.username} logged in`);cov_jwqajhp1a.s[14]++;done(null,user.username);});cov_jwqajhp1a.s[15]++;passport.deserializeUser(async(username,done)=>{cov_jwqajhp1a.f[3]++;cov_jwqajhp1a.s[16]++;if(!username){cov_jwqajhp1a.b[2][0]++;cov_jwqajhp1a.s[17]++;done(null,false);}else{cov_jwqajhp1a.b[2][1]++;cov_jwqajhp1a.s[18]++;try{cov_jwqajhp1a.s[19]++;done(null,username);}catch(err){cov_jwqajhp1a.s[20]++;logger.info(err);cov_jwqajhp1a.s[21]++;done(err,username);}}});}cov_jwqajhp1a.s[22]++;module.exports=passportConfig;